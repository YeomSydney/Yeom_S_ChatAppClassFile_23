// Imports will always go at the top

const socket = io();

// Utility functions for socket
function setUserID({ sID }) {
    // debugger;

    // Save our unique ID generated by Socket on the server side. - this is how we track individual connections to the chat service.
    vm.socketID = sID;
}

function showNewMessage({ message }) {
    vm.message.push(message);
}

const { createApp } = Vue;

const vm = createApp({
    data(){
        return {
            socketID: '',
            message: '',
            messages: []
        }
    },

    methods: {
        dispatchMessage() {
            // debugger;
            socket.emit('chat_message', {
                content: this.message,
                name: this.nickname || 'anonymous'
            });
        }
    },

    components: {

    }
}).mount('#app');

socket.addEventListener('connected', setUserID);
socket.addEventListener('new_message', showNewMessage);